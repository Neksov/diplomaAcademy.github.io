(()=>{"use strict";(()=>{const e=document.querySelectorAll(".popup"),t=document.querySelector(".popup-call"),o=document.querySelector(".popup-discount"),l=document.querySelector(".popup-check"),c=document.querySelector(".popup-consultation"),n=document.querySelectorAll(".button"),r=document.querySelectorAll(".call-btn");document.querySelector(".phone-user"),document.querySelectorAll("[name=user_name]"),n.forEach((e=>{e.addEventListener("click",(e=>{e.target.matches(".discount-btn")?o.style.display="block":e.target.matches(".check-btn")?l.style.display="block":e.target.matches(".consultation-btn")&&(c.style.display="block")}))})),r.forEach((e=>{e.addEventListener("click",(e=>{e.target.matches(".call-btn")&&(t.style.display="block")}))})),e.forEach((e=>{e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?e.style.display="none":(o=o.closest(".popup-content"),o||(e.style.display="none"))}))}))})(),(()=>{const e=document.querySelector(".add-sentence-btn"),t=document.querySelectorAll(".hidden"),o=document.querySelector(".visible-sm-block");t.forEach((t=>{e.addEventListener("click",(()=>{t.classList.remove("hidden"),o.classList.remove("visible-sm-block"),e.style.display="none"}))}))})(),(()=>{const e=document.querySelectorAll(".panel-group"),t=document.querySelectorAll(".panel-heading"),o=document.querySelectorAll(".collapse");document.querySelectorAll(".collapsed"),e.forEach((e=>{e.addEventListener("click",(e=>{let l=e.target;l=l.closest(".panel-heading"),l&&t.forEach(((e,c)=>{e===l&&(e=>{for(let l=0;l<t.length;l++)e===l?(t[l].classList.remove("d-none"),o[l].classList.add("in")):(t[l].classList.add("d-none"),o[l].classList.remove("in"))})(c)}))}))}))})(),(()=>{const e=document.querySelectorAll(".capture-form"),t=(document.querySelector(".main-form"),document.querySelector(".director-form"),document.querySelectorAll("input")),o=document.querySelectorAll(".phone-user"),l=(document.querySelector("[name=user_quest]"),document.querySelectorAll("[name=user_name]")),c=document.querySelector(".popup-call"),n=document.querySelector(".popup-discount"),r=document.querySelector(".popup-check"),s=document.querySelector(".popup-consultation");let a=document.createElement("div"),u=document.createElement("div");a.style.cssText="font-size: 2rem;",a.style.cssText="color: black;",t.forEach((e=>{e.addEventListener("input",(e=>{let t=e.target;t.matches("[name=user_name]")||t.matches("[name=user_quest]")?t.value=t.value.replace(/[^а-яё\s]/gi,""):t.matches(".phone-user")&&(t.value=t.value.replace(/[^\+\d]/g,"").substring(0,12))}))}));let d=()=>{setTimeout((()=>{a.remove(),c.style.display="none",n.style.display="none",r.style.display="none",s.style.display="none"}),3e3)};o.forEach((e=>{e.value.match(/[0-9+]{7,13}/gi)})),e.forEach((e=>{e.addEventListener("submit",(t=>{console.log(e),t.preventDefault(),e.appendChild(a),e.appendChild(u),u.classList.add("sk-spinner-pulse");const c=new FormData(e);let n={};c.forEach(((e,t)=>{n[t]=e})),i(n).then((e=>{if(200!==e.status)throw new Error("status network not 200");u.remove(u),a.textContent="Отправлено",d()})).catch((e=>{u.remove(u),a.textContent="Ошибка",d(),console.error(e)})),l.value="",o.value="",a.textContent=""}))}));const i=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"})})()})();